---
import "../styles/base.css";

const { title } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link
  		href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:wght@400;700&family=Material+Symbols+Outlined:FILL@0..1,GRAD@0..200,opsz@20..48,wght@100..700&display=swap"
  		rel="stylesheet"
	/>

    <title>{title ?? "Chatham County Democratic Party"}</title>
  </head>

  <body>
    <header class="site-header">
      <div class="container header-inner">
        <a href="/" class="logo">CCDP</a>

        <nav class="nav" aria-label="Site Navigation">
		  <a href="/">Home</a>
		  <a href="/about">About</a>
		  <a href="/elections">Elections</a>
          <a href="/get-involved">Get Involved</a>
          <a href="/events">Events</a>
          <a href="/news">News</a>
        </nav>

		<button
			class="theme-toggle"
			type="button"
			aria-label="Toggle light and dark theme"
			data-theme-toggle
		>
			<span aria-hidden="true">ðŸŒ“</span>
			<span class="theme-toggle-label">Toggle Theme</span>
		</button>
      </div>
    </header>

    <main class="site-main">
	  <div class="container">
      	<slot />
	  </div>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <p class="small">
          Â© {new Date().getFullYear()} Chatham County Democratic Party. All rights reserved.
        </p>
      </div>
    </footer>

	<script is:inline>
		(function () {
			const storageKey = 'ccdp-theme';
			const root = document.documentElement;

			function setTheme(theme) {
				root.setAttribute('data-theme', theme);
			}

			// Initial theme: saved value or system preferences
			const savedTheme = localStorage.getItem(storageKey);
			const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;

			if (savedTheme === "dark" || (!savedTheme && prefersDark)) {
				setTheme('dark');
			} else {
				setTheme('light');
			}

			// Toggle button click
			window.addEventListener('DOMContentLoaded', () => {
				const toggleButton = document.querySelector('[data-theme-toggle]');
				if (!toggleButton) return;

				toggleButton.addEventListener('click', () => {
					const currentTheme = root.getAttribute('data-theme') === "dark" ? 'dark' : 'light';
					const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
					setTheme(nextTheme);
					localStorage.setItem(storageKey, nextTheme);
				});
			});
		})();
	</script>
  </body>
</html>